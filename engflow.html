<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>EngFlow- Productivity App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #020617;
      --panel: #050816;
      --card: #0b1120;
      --accent: #3b82f6;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: #1f2937;
      --radius: 10px;
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(
        circle at top,
        #111827 0,
        #020617 40%,
        #000 100%
      );
      color: var(--text);
    }

    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.7rem 1rem;
      border-bottom: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(10px);
    }

    .top-bar h1 {
      margin: 0;
      font-size: 1rem;
      letter-spacing: 0.08em;
    }

    .top-bar-right {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .nav-tabs {
      display: flex;
      gap: 0.25rem;
    }

    .nav-tab {
      border: none;
      border-radius: 999px;
      padding: 0.25rem 0.7rem;
      font-size: 0.75rem;
      background: transparent;
      color: var(--muted);
      cursor: pointer;
    }

    .nav-tab.active {
      background: var(--accent);
      color: white;
    }

    .main {
      padding: 1rem;
    }

    .screen {
      display: none;
      background: var(--panel);
      border-radius: var(--radius);
      border: 1px solid var(--border);
      padding: 0.9rem 1rem;
    }

    .active-screen {
      display: block;
    }

    h2 {
      margin-top: 0;
      margin-bottom: 0.5rem;
    }

    .subtext {
      margin: 0 0 0.7rem;
      font-size: 0.8rem;
      color: var(--muted);
    }

    /* Dashboard */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 0.6rem;
    }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 0.6rem 0.7rem;
      border: 1px solid var(--border);
    }

    .card h3 {
      margin: 0;
      font-size: 0.75rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .card-number {
      margin: 0.2rem 0 0;
      font-size: 1.3rem;
    }

    /* Subjects */
    .subjects-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .subject-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0.6rem;
      margin-bottom: 0.35rem;
      border-radius: var(--radius);
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid var(--border);
      cursor: pointer;
    }

    .subject-item:hover {
      border-color: var(--accent);
    }

    .subject-main {
      display: flex;
      flex-direction: column;
    }

    .subject-name {
      font-size: 0.95rem;
    }

    .subject-extra {
      font-size: 0.75rem;
      color: var(--muted);
    }

    .subject-stats {
      text-align: right;
      font-size: 0.75rem;
      color: var(--muted);
    }

    /* Subject Detail */
    .subject-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .subject-meta {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .summary-card {
      background: var(--card);
      border-radius: var(--radius);
      border: 1px solid var(--border);
      padding: 0.4rem 0.5rem;
      text-align: center;
    }

    .summary-label {
      display: block;
      font-size: 0.7rem;
      color: var(--muted);
    }

    .summary-value {
      font-size: 1rem;
      font-weight: 500;
    }

    /* Task lists */
    .task-list,
    .simple-task-list {
      list-style: none;
      margin: 0;
      padding: 0;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      overflow: hidden;
    }

    .task-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.45rem 0.6rem;
      font-size: 0.85rem;
      border-bottom: 1px solid var(--border);
    }

    .task-item:last-child {
      border-bottom: none;
    }

    .task-title {
      font-weight: 500;
    }

    .task-meta {
      font-size: 0.75rem;
      color: var(--muted);
    }

    .chip {
      display: inline-block;
      padding: 0.1rem 0.45rem;
      border-radius: 999px;
      font-size: 0.7rem;
      border: 1px solid var(--border);
      margin-right: 0.3rem;
    }

    /* Buttons */
    .primary-btn,
    .secondary-btn {
      border: none;
      cursor: pointer;
      font: inherit;
    }

    .primary-btn {
      padding: 0.35rem 0.8rem;
      border-radius: 999px;
      background: var(--accent);
      color: white;
      font-size: 0.8rem;
    }

    .primary-btn.small {
      padding: 0.25rem 0.6rem;
      font-size: 0.75rem;
    }

    .secondary-btn {
      padding: 0.35rem 0.8rem;
      border-radius: 999px;
      background: transparent;
      color: var(--muted);
      border: 1px solid var(--border);
      font-size: 0.8rem;
    }

    /* Form */
    .task-form {
      max-width: 360px;
    }

    .form-row {
      display: flex;
      flex-direction: column;
      margin-bottom: 0.5rem;
      font-size: 0.8rem;
    }

    .form-row label {
      margin-bottom: 0.15rem;
      color: var(--muted);
    }

    .form-row input,
    .form-row select {
      padding: 0.35rem 0.4rem;
      border-radius: 0.4rem;
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text);
      font: inherit;
    }

    .form-actions {
      margin-top: 0.6rem;
      display: flex;
      gap: 0.4rem;
    }

    .section-title {
      margin-top: 1rem;
      margin-bottom: 0.4rem;
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      .dashboard-grid,
      .summary-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .subject-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }

      .subject-item {
        flex-direction: column;
        align-items: flex-start;
      }

      .subject-stats {
        margin-top: 0.25rem;
        text-align: left;
      }
    }
  </style>
</head>
<body>
  <header class="top-bar">
    <h1>EngFlow</h1>
    <nav class="nav-tabs">
      <button class="nav-tab active" data-screen="dashboard-screen">Dashboard</button>
      <button class="nav-tab" data-screen="subjects-screen">Subjects</button>
      <button class="nav-tab" data-screen="subject-detail-screen">Subject Detail</button>
      <button class="nav-tab" data-screen="add-task-screen">Add Task</button>
    </nav>
    <div class="top-bar-right">
      <span id="today-date"></span>
    </div>
  </header>

  <main class="main">
    <!-- Dashboard -->
    <section id="dashboard-screen" class="screen active-screen">
      <h2>Dashboard</h2>
      <div class="dashboard-grid">
        <div class="card">
          <h3>Total Tasks</h3>
          <p id="dash-total" class="card-number">0</p>
        </div>
        <div class="card">
          <h3>Due Today</h3>
          <p id="dash-today" class="card-number">0</p>
        </div>
        <div class="card">
          <h3>Next 7 Days</h3>
          <p id="dash-week" class="card-number">0</p>
        </div>
        <div class="card">
          <h3>Completion</h3>
          <p id="dash-completion" class="card-number">0%</p>
        </div>
      </div>
      <h3 class="section-title">Upcoming Tasks</h3>
      <ul id="dashboard-task-list" class="task-list"></ul>
    </section>

    <!-- Subjects -->
    <section id="subjects-screen" class="screen">
      <h2>Subjects</h2>
      <p class="subtext">Select a subject to view its tasks and progress.</p>
      <ul id="subject-list" class="subjects-list"></ul>
    </section>

    <!-- Subject Detail -->
    <section id="subject-detail-screen" class="screen">
      <header class="subject-header">
        <div>
          <h2 id="subject-detail-title">Engineering Physics</h2>
          <p id="subject-detail-meta" class="subject-meta"></p>
        </div>
        <button id="subject-add-task-btn" class="primary-btn small">
          + Add Task
        </button>
      </header>

      <div class="summary-grid">
        <div class="summary-card">
          <span class="summary-label">Total</span>
          <span id="sub-total" class="summary-value">0</span>
        </div>
        <div class="summary-card">
          <span class="summary-label">Pending</span>
          <span id="sub-pending" class="summary-value">0</span>
        </div>
        <div class="summary-card">
          <span class="summary-label">Done</span>
          <span id="sub-done" class="summary-value">0</span>
        </div>
        <div class="summary-card">
          <span class="summary-label">Completion</span>
          <span id="sub-completion" class="summary-value">0%</span>
        </div>
      </div>

      <h3 class="section-title">Tasks for this subject</h3>
      <ul id="subject-task-list" class="task-list"></ul>
    </section>

    <!-- Add Task -->
    <section id="add-task-screen" class="screen">
      <h2 id="add-task-title">Add Task</h2>
      <p id="add-task-context" class="subtext"></p>

      <form id="task-form" class="task-form">
        <div class="form-row">
          <label for="task-title">Title</label>
          <input id="task-title" type="text" required />
        </div>

        <div class="form-row">
          <label for="task-type">Type</label>
          <select id="task-type" required>
            <option value="assignment">Assignment</option>
            <option value="lab">Lab</option>
            <option value="exam">Exam</option>
            <option value="project">Project</option>
          </select>
        </div>

        <div class="form-row">
          <label for="task-subject">Subject</label>
          <input
            id="task-subject"
            type="text"
            placeholder="e.g. Engineering Physics"
            required
          />
        </div>

        <div class="form-row">
          <label for="task-due">Due Date</label>
          <input id="task-due" type="date" required />
        </div>

        <div class="form-row">
          <label for="task-status">Status</label>
          <select id="task-status" required>
            <option value="pending">Pending</option>
            <option value="in-progress">In Progress</option>
            <option value="done">Done</option>
          </select>
        </div>

        <div class="form-actions">
          <button type="button" id="cancel-add" class="secondary-btn">
            Cancel
          </button>
          <button type="submit" class="primary-btn">
            Save Task
          </button>
        </div>
      </form>
    </section>
  </main>

  <script>
    // Mock data (frontend-only)
    const tasks = [
      {
        id: 1,
        title: "Physics Assignment 1",
        type: "assignment",
        subject: "Engineering Physics",
        due: "2026-01-20",
        status: "pending"
      },
      {
        id: 2,
        title: "C Lab 3",
        type: "lab",
        subject: "Programming in C",
        due: "2026-01-18",
        status: "in-progress"
      },
      {
        id: 3,
        title: "Midterm Exam",
        type: "exam",
        subject: "Engineering Mathematics",
        due: "2026-01-25",
        status: "pending"
      },
      {
        id: 4,
        title: "Mini Project Proposal",
        type: "project",
        subject: " Basic Electronics Engineering",
        due: "2026-01-22",
        status: "done"
      },
      {
        id: 5,
        title: "Physics Assignment 2",
        type: "assignment",
        subject: "Engineering Physics",
        due: "2026-01-28",
        status: "done"
      }
    ];

    let nextId = 6;
    let currentSubject = "Engineering Physics";

    // Elements
    const todayDateEl = document.getElementById("today-date");
    const navTabs = document.querySelectorAll(".nav-tab");
    const screens = document.querySelectorAll(".screen");

    const dashTotalEl = document.getElementById("dash-total");
    const dashTodayEl = document.getElementById("dash-today");
    const dashWeekEl = document.getElementById("dash-week");
    const dashCompletionEl = document.getElementById("dash-completion");
    const dashTaskListEl = document.getElementById("dashboard-task-list");

    const subjectListEl = document.getElementById("subject-list");

    const subjectDetailTitleEl = document.getElementById("subject-detail-title");
    const subjectDetailMetaEl = document.getElementById("subject-detail-meta");
    const subjectTaskListEl = document.getElementById("subject-task-list");
    const subTotalEl = document.getElementById("sub-total");
    const subPendingEl = document.getElementById("sub-pending");
    const subDoneEl = document.getElementById("sub-done");
    const subCompletionEl = document.getElementById("sub-completion");
    const subjectAddTaskBtn = document.getElementById("subject-add-task-btn");

    const addTaskTitleEl = document.getElementById("add-task-title");
    const addTaskContextEl = document.getElementById("add-task-context");
    const taskForm = document.getElementById("task-form");
    const titleInput = document.getElementById("task-title");
    const typeInput = document.getElementById("task-type");
    const subjectInput = document.getElementById("task-subject");
    const dueInput = document.getElementById("task-due");
    const statusInput = document.getElementById("task-status");
    const cancelAddBtn = document.getElementById("cancel-add");

    // Utils
    function switchScreen(id) {
      screens.forEach((s) => s.classList.remove("active-screen"));
      document.getElementById(id).classList.add("active-screen");

      navTabs.forEach((btn) => {
        btn.classList.toggle("active", btn.dataset.screen === id);
      });
    }

    function formatDateShort(dateStr) {
      const d = new Date(dateStr);
      return d.toLocaleDateString("en-IN", {
        day: "2-digit",
        month: "short"
      });
    }

    function getTodayISO() {
      return new Date().toISOString().slice(0, 10);
    }

    // Dashboard
    function renderDashboard() {
      const total = tasks.length;
      dashTotalEl.textContent = total;

      const todayISO = getTodayISO();
      const todayCount = tasks.filter((t) => t.due === todayISO).length;
      dashTodayEl.textContent = todayCount;

      const today = new Date(todayISO);
      const weekAhead = new Date(today);
      weekAhead.setDate(today.getDate() + 7);
      const weekCount = tasks.filter((t) => {
        const d = new Date(t.due);
        return d > today && d <= weekAhead;
      }).length;
      dashWeekEl.textContent = weekCount;

      const doneCount = tasks.filter((t) => t.status === "done").length;
      const completion = total === 0 ? 0 : Math.round((doneCount / total) * 100);
      dashCompletionEl.textContent = `${completion}%`;

      dashTaskListEl.innerHTML = "";
      const upcomingSorted = [...tasks].sort((a, b) =>
        a.due.localeCompare(b.due)
      );

      upcomingSorted.forEach((task) => {
        const li = document.createElement("li");
        li.className = "task-item";

        const left = document.createElement("div");
        left.textContent = task.title;

        const right = document.createElement("div");
        right.className = "task-meta";
        right.textContent = `${task.subject} • ${formatDateShort(task.due)}`;

        li.appendChild(left);
        li.appendChild(right);
        dashTaskListEl.appendChild(li);
      });
    }

    // Subjects
    function renderSubjects() {
      const subjects = [...new Set(tasks.map((t) => t.subject))];
      subjectListEl.innerHTML = "";

      subjects.forEach((subj) => {
        const subjTasks = tasks.filter((t) => t.subject === subj);
        const total = subjTasks.length;
        const done = subjTasks.filter((t) => t.status === "done").length;
        const pending = subjTasks.filter((t) => t.status !== "done").length;
        const completion = total === 0 ? 0 : Math.round((done / total) * 100);

        const li = document.createElement("li");
        li.className = "subject-item";

        const mainDiv = document.createElement("div");
        mainDiv.className = "subject-main";

        const nameDiv = document.createElement("div");
        nameDiv.className = "subject-name";
        nameDiv.textContent = subj;

        const extraDiv = document.createElement("div");
        extraDiv.className = "subject-extra";
        extraDiv.textContent = `${total} tasks • ${pending} pending • ${done} done`;

        mainDiv.appendChild(nameDiv);
        mainDiv.appendChild(extraDiv);

        const statsDiv = document.createElement("div");
        statsDiv.className = "subject-stats";
        statsDiv.textContent = `${completion}% done`;

        li.appendChild(mainDiv);
        li.appendChild(statsDiv);

        li.addEventListener("click", () => {
          currentSubject = subj;
          switchScreen("subject-detail-screen");
          renderSubjectDetail();
        });

        subjectListEl.appendChild(li);
      });
    }

    // Subject Detail
    function renderSubjectDetail() {
      if (!currentSubject) return;

      const subjTasks = tasks.filter((t) => t.subject === currentSubject);
      const total = subjTasks.length;
      const pending = subjTasks.filter((t) => t.status !== "done").length;
      const done = subjTasks.filter((t) => t.status === "done").length;
      const completion = total === 0 ? 0 : Math.round((done / total) * 100);

      subjectDetailTitleEl.textContent = currentSubject;
      subjectDetailMetaEl.textContent = `${total} tasks • ${completion}% done`;

      subTotalEl.textContent = total;
      subPendingEl.textContent = pending;
      subDoneEl.textContent = done;
      subCompletionEl.textContent = `${completion}%`;

      subjectTaskListEl.innerHTML = "";
      subjTasks
        .sort((a, b) => a.due.localeCompare(b.due))
        .forEach((task) => {
          const li = document.createElement("li");
          li.className = "task-item";

          const left = document.createElement("div");
          const titleDiv = document.createElement("div");
          titleDiv.className = "task-title";
          titleDiv.textContent = task.title;

          const typeChip = document.createElement("span");
          typeChip.className = "chip";
          typeChip.textContent = task.type;
          left.appendChild(titleDiv);
          left.appendChild(typeChip);

          const right = document.createElement("div");
          right.className = "task-meta";
          right.textContent = `${formatDateShort(task.due)} • ${task.status}`;

          li.appendChild(left);
          li.appendChild(right);

          li.addEventListener("click", () => {
            alert("Edit task: " + task.title);
          });

          subjectTaskListEl.appendChild(li);
        });
    }

    // Add Task
    function openAddTask(subjectPref = null) {
      switchScreen("add-task-screen");

      addTaskTitleEl.textContent = "Add Task";
      if (subjectPref) {
        addTaskContextEl.textContent = `New task for ${subjectPref}`;
      } else {
        addTaskContextEl.textContent = "";
      }

      taskForm.reset();
      dueInput.value = getTodayISO();
      subjectInput.value = subjectPref || "";
    }

    taskForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const data = {
        title: titleInput.value.trim(),
        type: typeInput.value,
        subject: subjectInput.value.trim(),
        due: dueInput.value,
        status: statusInput.value
      };

      if (!data.title || !data.subject || !data.due) return;

      tasks.push({
        id: nextId++,
        ...data
      });

      renderDashboard();
      renderSubjects();
      if (currentSubject && currentSubject === data.subject) {
        renderSubjectDetail();
      }

      if (currentSubject && currentSubject === data.subject) {
        switchScreen("subject-detail-screen");
      } else {
        switchScreen("dashboard-screen");
      }
    });

    cancelAddBtn.addEventListener("click", () => {
      switchScreen("dashboard-screen");
    });

    // Navigation
    navTabs.forEach((btn) => {
      btn.addEventListener("click", () => {
        const target = btn.dataset.screen;
        switchScreen(target);
        if (target === "dashboard-screen") renderDashboard();
        if (target === "subjects-screen") renderSubjects();
        if (target === "subject-detail-screen") renderSubjectDetail();
        if (target === "add-task-screen") openAddTask();
      });
    });

    subjectAddTaskBtn.addEventListener("click", () => {
      if (!currentSubject) return;
      openAddTask(currentSubject);
    });

    // Init
    function init() {
      const today = new Date();
      todayDateEl.textContent = today.toLocaleDateString("en-IN", {
        weekday: "short",
        day: "2-digit",
        month: "short",
        year: "numeric"
      });

      dueInput.value = getTodayISO();
      renderDashboard();
      renderSubjects();
      renderSubjectDetail(); // Set default subject
    }

    init();
  </script>
</body>
</html>